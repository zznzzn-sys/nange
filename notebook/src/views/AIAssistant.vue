<template>
  <div class="ai-assistant">
    <!-- AIåŠ©æ‰‹å¤´éƒ¨ -->
    <div class="ai-header">
      <h1>AIåˆ›ä½œåŠ©æ‰‹</h1>
      <p class="subtitle">ä¸‰çº§AIæ™ºèƒ½ä½“ååŒå·¥ä½œï¼Œä¸ºæ‚¨çš„åˆ›ä½œæä¾›å…¨æ–¹ä½æ”¯æŒ</p>
      <div class="ai-status">
        <div class="status-item online">
          <span class="status-dot"></span>
          <span>ä½œå“çº§AI: åœ¨çº¿</span>
        </div>
        <div class="status-item online">
          <span class="status-dot"></span>
          <span>ç« èŠ‚çº§AI: åœ¨çº¿</span>
        </div>
        <div class="status-item online">
          <span class="status-dot"></span>
          <span>è§’è‰²çº§AI: åœ¨çº¿</span>
        </div>
      </div>
    </div>

    <!-- AIåŠŸèƒ½é¢æ¿ -->
    <div class="ai-panels">
      <!-- ä½œå“çº§AIé¢æ¿ -->
      <div class="ai-panel work-ai">
        <div class="panel-header">
          <div class="panel-icon">ğŸ“š</div>
          <h3>ä½œå“çº§AI - æ€»ç¼–å‰§</h3>
          <span class="panel-badge">ä½œå“çº§</span>
        </div>
        <div class="panel-content">
          <p class="panel-description">è´Ÿè´£ä½œå“æ•´ä½“æ¶æ„ã€æƒ…èŠ‚ä¸»çº¿è®¾è®¡å’Œä¸€è‡´æ€§æ£€æŸ¥</p>
          <div class="ai-features">
            <div class="feature-item">
              <span class="feature-icon">ğŸ¯</span>
              <span>æƒ…èŠ‚ä¸»çº¿è®¾è®¡</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ”—</span>
              <span>è§’è‰²å…³ç³»å›¾è°±</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ“Š</span>
              <span>èŠ‚å¥è¯„ä¼°æŠ¥å‘Š</span>
            </div>
          </div>
          <div class="ai-actions">
            <button class="action-btn primary" @click="analyzePlot">
              <span class="btn-icon">ğŸ”</span>
              åˆ†ææƒ…èŠ‚
            </button>
            <button class="action-btn secondary" @click="generateOutline">
              <span class="btn-icon">ğŸ“</span>
              ç”Ÿæˆå¤§çº²
            </button>
          </div>
        </div>
      </div>

      <!-- ç« èŠ‚çº§AIé¢æ¿ -->
      <div class="ai-panel chapter-ai">
        <div class="panel-header">
          <div class="panel-icon">ğŸ“–</div>
          <h3>ç« èŠ‚çº§AI - å†™ä½œæ­æ¡£</h3>
          <span class="panel-badge">ç« èŠ‚çº§</span>
        </div>
        <div class="panel-content">
          <p class="panel-description">ååŠ©ç« èŠ‚å†…å®¹åˆ›ä½œã€æ–‡é£æ¨¡ä»¿å’Œè¯­æ³•æ ¡å¯¹</p>
          <div class="ai-features">
            <div class="feature-item">
              <span class="feature-icon">âœï¸</span>
              <span>æ–‡é£ä¸€è‡´æ€§æ£€æŸ¥</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ’¬</span>
              <span>å¯¹è¯æ¶¦è‰²ä¼˜åŒ–</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ“</span>
              <span>è¯­æ³•æ ¡å¯¹çº é”™</span>
            </div>
          </div>
          <div class="ai-actions">
            <button class="action-btn primary" @click="polishChapter">
              <span class="btn-icon">âœ¨</span>
              æ¶¦è‰²ç« èŠ‚
            </button>
            <button class="action-btn secondary" @click="checkConsistency">
              <span class="btn-icon">âœ…</span>
              æ£€æŸ¥ä¸€è‡´æ€§
            </button>
          </div>
        </div>
      </div>

      <!-- è§’è‰²çº§AIé¢æ¿ -->
      <div class="ai-panel character-ai">
        <div class="panel-header">
          <div class="panel-icon">ğŸ‘¥</div>
          <h3>è§’è‰²çº§AI - çµé­‚å¡‘é€ è€…</h3>
          <span class="panel-badge">è§’è‰²çº§</span>
        </div>
        <div class="panel-content">
          <p class="panel-description">è´Ÿè´£è§’è‰²è¡Œä¸ºä¸€è‡´æ€§ã€å¯¹è¯é£æ ¼å’Œæˆé•¿è½¨è¿¹</p>
          <div class="ai-features">
            <div class="feature-item">
              <span class="feature-icon">ğŸ­</span>
              <span>è§’è‰²è¡Œä¸ºåˆ†æ</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ’­</span>
              <span>å†…å¿ƒç‹¬ç™½ç”Ÿæˆ</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ“ˆ</span>
              <span>æˆé•¿è½¨è¿¹å»ºè®®</span>
            </div>
          </div>
          <div class="ai-actions">
            <button class="action-btn primary" @click="analyzeCharacter">
              <span class="btn-icon">ğŸ”</span>
              åˆ†æè§’è‰²
            </button>
            <button class="action-btn secondary" @click="generateDialogue">
              <span class="btn-icon">ğŸ’¬</span>
              ç”Ÿæˆå¯¹è¯
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- AIèŠå¤©ç•Œé¢ -->
    <div class="ai-chat">
      <div class="chat-header">
        <h3>AIåˆ›ä½œå¯¹è¯</h3>
        <div class="chat-actions">
          <button class="action-btn small" @click="clearChat">
            <span class="btn-icon">ğŸ—‘ï¸</span>
            æ¸…ç©ºå¯¹è¯
          </button>
          <button class="action-btn small" @click="exportChat">
            <span class="btn-icon">ğŸ“¤</span>
            å¯¼å‡ºå¯¹è¯
          </button>
        </div>
      </div>
      <div class="chat-messages">
        <div v-for="message in chatMessages" :key="message.id" 
             :class="['message', message.type]">
          <div class="message-avatar">
            <span v-if="message.type === 'user'">ğŸ‘¤</span>
            <span v-else>ğŸ¤–</span>
          </div>
          <div class="message-content">
            <div class="message-text">{{ message.text }}</div>
            <div class="message-time">{{ message.time }}</div>
          </div>
        </div>
      </div>
      <div class="chat-input">
        <textarea v-model="userInput" placeholder="å‘AIåŠ©æ‰‹æé—®..." 
                  @keydown.enter.prevent="sendMessage"></textarea>
        <button class="send-btn" @click="sendMessage">
          <span class="send-icon">ğŸš€</span>
          å‘é€
        </button>
      </div>
    </div>

    <!-- AIå»ºè®®åŒºåŸŸ -->
    <div class="ai-suggestions">
      <h3>æ™ºèƒ½åˆ›ä½œå»ºè®®</h3>
      <div class="suggestions-grid">
        <div class="suggestion-card" v-for="suggestion in aiSuggestions" :key="suggestion.id">
          <div class="suggestion-header">
            <span class="suggestion-icon">{{ suggestion.icon }}</span>
            <span class="suggestion-type">{{ suggestion.type }}</span>
          </div>
          <div class="suggestion-content">
            <h4>{{ suggestion.title }}</h4>
            <p>{{ suggestion.description }}</p>
          </div>
          <div class="suggestion-actions">
            <button class="action-btn small" @click="applySuggestion(suggestion.id)">
              åº”ç”¨å»ºè®®
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const chatMessages = ref([
  {
    id: 1,
    type: 'ai',
    text: 'æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„AIåˆ›ä½œåŠ©æ‰‹ã€‚æˆ‘å¯ä»¥å¸®åŠ©æ‚¨è¿›è¡Œæƒ…èŠ‚è®¾è®¡ã€è§’è‰²å¡‘é€ å’Œç« èŠ‚æ¶¦è‰²ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ',
    time: '09:00'
  }
])

const userInput = ref('')
const aiSuggestions = ref([
  {
    id: 1,
    icon: 'ğŸ’¡',
    type: 'æƒ…èŠ‚å»ºè®®',
    title: 'å¢åŠ æƒ…èŠ‚åè½¬',
    description: 'å»ºè®®åœ¨ç¬¬5ç« åŠ å…¥ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„åè½¬ï¼Œæå‡è¯»è€…å…´è¶£'
  },
  {
    id: 2,
    icon: 'ğŸ­',
    type: 'è§’è‰²ä¼˜åŒ–',
    title: 'ä¸»è§’æ€§æ ¼æ·±åŒ–',
    description: 'ä¸»è§’çš„æ€§æ ¼ç‰¹ç‚¹å¯ä»¥æ›´åŠ é²œæ˜ï¼Œå»ºè®®å¢åŠ å†…å¿ƒç‹¬ç™½'
  },
  {
    id: 3,
    icon: 'ğŸ“Š',
    type: 'èŠ‚å¥è°ƒæ•´',
    title: 'èŠ‚å¥ä¼˜åŒ–å»ºè®®',
    description: 'ç¬¬3ç« åˆ°ç¬¬4ç« çš„èŠ‚å¥å¯ä»¥é€‚å½“åŠ å¿«ï¼Œä¿æŒè¯»è€…æ³¨æ„åŠ›'
  }
])

const sendMessage = () => {
  if (userInput.value.trim()) {
    // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    chatMessages.value.push({
      id: Date.now(),
      type: 'user',
      text: userInput.value,
      time: new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })
    })

    // æ¨¡æ‹ŸAIå›å¤
    setTimeout(() => {
      chatMessages.value.push({
        id: Date.now() + 1,
        type: 'ai',
        text: 'è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„AIå›å¤ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨çœŸå®çš„AIæ¨¡å‹æ¥ç”Ÿæˆå›å¤ã€‚',
        time: new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })
      })
    }, 1000)

    userInput.value = ''
  }
}

const clearChat = () => {
  chatMessages.value = [chatMessages.value[0]] // ä¿ç•™ç¬¬ä¸€æ¡æ¬¢è¿æ¶ˆæ¯
}

const exportChat = () => {
  console.log('å¯¼å‡ºå¯¹è¯è®°å½•')
}

const analyzePlot = () => {
  console.log('åˆ†ææƒ…èŠ‚')
}

const generateOutline = () => {
  console.log('ç”Ÿæˆå¤§çº²')
}

const polishChapter = () => {
  console.log('æ¶¦è‰²ç« èŠ‚')
}

const checkConsistency = () => {
  console.log('æ£€æŸ¥ä¸€è‡´æ€§')
}

const analyzeCharacter = () => {
  console.log('åˆ†æè§’è‰²')
}

const generateDialogue = () => {
  console.log('ç”Ÿæˆå¯¹è¯')
}

const applySuggestion = (suggestionId) => {
  console.log('åº”ç”¨å»ºè®®:', suggestionId)
}
</script>

<style scoped>
.ai-assistant {
  max-width: 1200px;
  margin: 0 auto;
}

.ai-header {
  background: white;
  padding: 2rem;
  border-radius: 1rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  text-align: center;
}

.ai-header h1 {
  color: #2d3748;
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
}

.subtitle {
  color: #718096;
  margin-bottom: 1.5rem;
}

.ai-status {
  display: flex;
  justify-content: center;
  gap: 2rem;
}

.status-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #48bb78;
}

.status-item.online .status-dot {
  background: #48bb78;
}

.ai-panels {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.ai-panel {
  background: white;
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.ai-panel:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.panel-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.panel-icon {
  font-size: 2rem;
}

.panel-header h3 {
  color: #2d3748;
  margin: 0;
  flex: 1;
}

.panel-badge {
  background: #667eea;
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 1rem;
  font-size: 0.8rem;
  font-weight: 500;
}

.panel-description {
  color: #718096;
  margin-bottom: 1.5rem;
  line-height: 1.4;
}

.ai-features {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

.feature-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #4a5568;
}

.feature-icon {
  font-size: 1.2rem;
}

.ai-actions {
  display: flex;
  gap: 0.5rem;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.action-btn.primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.action-btn.secondary {
  background: #e2e8f0;
  color: #4a5568;
}

.action-btn.small {
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
}

.action-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.ai-chat {
  background: white;
  border-radius: 1rem;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.chat-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.chat-header h3 {
  color: #2d3748;
  margin: 0;
}

.chat-messages {
  height: 300px;
  overflow-y: auto;
  margin-bottom: 1rem;
  border: 1px solid #e2e8f0;
  border-radius: 0.75rem;
  padding: 1rem;
}

.message {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
}

.message.user {
  flex-direction: row-reverse;
}

.message-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #f7fafc;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
}

.message-content {
  flex: 1;
}

.message-text {
  background: #f7fafc;
  padding: 0.75rem 1rem;
  border-radius: 0.75rem;
  color: #2d3748;
}

.message.user .message-text {
  background: #667eea;
  color: white;
}

.message-time {
  font-size: 0.8rem;
  color: #a0aec0;
  margin-top: 0.25rem;
}

.chat-input {
  display: flex;
  gap: 0.5rem;
}

.chat-input textarea {
  flex: 1;
  padding: 0.75rem 1rem;
  border: 1px solid #e2e8f0;
  border-radius: 0.75rem;
  resize: none;
  height: 60px;
}

.send-btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 0 1.5rem;
  border-radius: 0.75rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
}

.ai-suggestions {
  background: white;
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.ai-suggestions h3 {
  color: #2d3748;
  margin-bottom: 1.5rem;
}

.suggestions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1rem;
}

.suggestion-card {
  border: 1px solid #e2e8f0;
  border-radius: 0.75rem;
  padding: 1rem;
  transition: all 0.3s ease;
}

.suggestion-card:hover {
  border-color: #667eea;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
}

.suggestion-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.suggestion-icon {
  font-size: 1.5rem;
}

.suggestion-type {
  background: #f7fafc;
  color: #4a5568;
  padding: 0.25rem 0.5rem;
  border-radius: 0.5rem;
  font-size: 0.8rem;
}

.suggestion-content h4 {
  color: #2d3748;
  margin-bottom: 0.5rem;
}

.suggestion-content p {
  color: #718096;
  font-size: 0.9rem;
  line-height: 1.4;
}

.suggestion-actions {
  margin-top: 1rem;
}

@media (max-width: 768px) {
  .ai-panels {
    grid-template-columns: 1fr;
  }
  
  .ai-status {
    flex-direction: column;
    gap: 1rem;
  }
  
  .suggestions-grid {
    grid-template-columns: 1fr;
  }
  
  .chat-input {
    flex-direction: column;
  }
  
  .send-btn {
    align-self: flex-end;
    width: auto;
  }
}
</style>